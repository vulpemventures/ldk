import { bip67sort } from '../src/p2ms';

const vectors = [
  {
    list: [
      '02ff12471208c14bd580709cb2358d98975247d8765f92bc25eab3b2763ed605f8',
      '02fe6f0a5a297eb38c391581c4413e084773ea23954d93f7753db7dc0adc188b2f',
    ],
    sorted: [
      '02fe6f0a5a297eb38c391581c4413e084773ea23954d93f7753db7dc0adc188b2f',
      '02ff12471208c14bd580709cb2358d98975247d8765f92bc25eab3b2763ed605f8',
    ],
  },
  {
    list: [
      '02632b12f4ac5b1d1b72b2a3b508c19172de44f6f46bcee50ba33f3f9291e47ed0',
      '027735a29bae7780a9755fae7a1c4374c656ac6a69ea9f3697fda61bb99a4f3e77',
      '02e2cc6bd5f45edd43bebe7cb9b675f0ce9ed3efe613b177588290ad188d11b404',
    ],
    sorted: [
      '02632b12f4ac5b1d1b72b2a3b508c19172de44f6f46bcee50ba33f3f9291e47ed0',
      '027735a29bae7780a9755fae7a1c4374c656ac6a69ea9f3697fda61bb99a4f3e77',
      '02e2cc6bd5f45edd43bebe7cb9b675f0ce9ed3efe613b177588290ad188d11b404',
    ],
  },
  {
    list: [
      '030000000000000000000000000000000000004141414141414141414141414141',
      '020000000000000000000000000000000000004141414141414141414141414141',
      '020000000000000000000000000000000000004141414141414141414141414140',
      '030000000000000000000000000000000000004141414141414141414141414140',
    ],
    sorted: [
      '020000000000000000000000000000000000004141414141414141414141414140',
      '020000000000000000000000000000000000004141414141414141414141414141',
      '030000000000000000000000000000000000004141414141414141414141414140',
      '030000000000000000000000000000000000004141414141414141414141414141',
    ],
  },
  {
    list: [
      '022df8750480ad5b26950b25c7ba79d3e37d75f640f8e5d9bcd5b150a0f85014da',
      '03e3818b65bcc73a7d64064106a859cc1a5a728c4345ff0b641209fba0d90de6e9',
      '021f2f6e1e50cb6a953935c3601284925decd3fd21bc445712576873fb8c6ebc18',
    ],
    sorted: [
      '021f2f6e1e50cb6a953935c3601284925decd3fd21bc445712576873fb8c6ebc18',
      '022df8750480ad5b26950b25c7ba79d3e37d75f640f8e5d9bcd5b150a0f85014da',
      '03e3818b65bcc73a7d64064106a859cc1a5a728c4345ff0b641209fba0d90de6e9',
    ],
  },
];

const h2b = (str: string) => Buffer.from(str, 'hex');
const b2h = (b: Buffer) => b.toString('hex');

describe('bip67 public keys sorting', () => {
  let i = 0;

  for (const { list, sorted } of vectors) {
    it(`test vector #${i}`, () =>
      expect(bip67sort(list.map(h2b)).map(b2h)).toEqual(sorted));
    i++;
  }
});
